{"ast":null,"code":"/**\n * Type Expression Operators: https://docs.mongodb.com/manual/reference/operator/aggregation/#type-expression-operators\n */\nimport { computeValue } from \"../../../core\";\nimport { isNil } from \"../../../util\";\nimport { TypeConvertError } from \"./_internal\";\n/**\n * Converts a value to a date. If the value cannot be converted to a date, $toDate errors. If the value is null or missing, $toDate returns null.\n *\n * @param obj\n * @param expr\n */\nexport const $toDate = (obj, expr, options) => {\n  const val = computeValue(obj, expr, null, options);\n  if (val instanceof Date) return val;\n  if (isNil(val)) return null;\n  const d = new Date(val);\n  const n = d.getTime();\n  if (!isNaN(n)) return d;\n  throw new TypeConvertError(`cannot convert '${val}' to date`);\n};","map":{"version":3,"names":["computeValue","isNil","TypeConvertError","$toDate","obj","expr","options","val","Date","d","n","getTime","isNaN"],"sources":["/Users/abdelghanem/Desktop/tasker/node_modules/mingo/dist/esm/operators/expression/type/toDate.js"],"sourcesContent":["/**\n * Type Expression Operators: https://docs.mongodb.com/manual/reference/operator/aggregation/#type-expression-operators\n */\nimport { computeValue } from \"../../../core\";\nimport { isNil } from \"../../../util\";\nimport { TypeConvertError } from \"./_internal\";\n/**\n * Converts a value to a date. If the value cannot be converted to a date, $toDate errors. If the value is null or missing, $toDate returns null.\n *\n * @param obj\n * @param expr\n */\nexport const $toDate = (obj, expr, options) => {\n    const val = computeValue(obj, expr, null, options);\n    if (val instanceof Date)\n        return val;\n    if (isNil(val))\n        return null;\n    const d = new Date(val);\n    const n = d.getTime();\n    if (!isNaN(n))\n        return d;\n    throw new TypeConvertError(`cannot convert '${val}' to date`);\n};\n"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,YAAY,QAAQ,eAAe;AAC5C,SAASC,KAAK,QAAQ,eAAe;AACrC,SAASC,gBAAgB,QAAQ,aAAa;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,MAAMC,OAAO,GAAGA,CAACC,GAAG,EAAEC,IAAI,EAAEC,OAAO,KAAK;EAC3C,MAAMC,GAAG,GAAGP,YAAY,CAACI,GAAG,EAAEC,IAAI,EAAE,IAAI,EAAEC,OAAO,CAAC;EAClD,IAAIC,GAAG,YAAYC,IAAI,EACnB,OAAOD,GAAG;EACd,IAAIN,KAAK,CAACM,GAAG,CAAC,EACV,OAAO,IAAI;EACf,MAAME,CAAC,GAAG,IAAID,IAAI,CAACD,GAAG,CAAC;EACvB,MAAMG,CAAC,GAAGD,CAAC,CAACE,OAAO,CAAC,CAAC;EACrB,IAAI,CAACC,KAAK,CAACF,CAAC,CAAC,EACT,OAAOD,CAAC;EACZ,MAAM,IAAIP,gBAAgB,CAAC,mBAAmBK,GAAG,WAAW,CAAC;AACjE,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}