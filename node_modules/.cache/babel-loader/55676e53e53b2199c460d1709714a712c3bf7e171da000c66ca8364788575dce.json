{"ast":null,"code":"// Array Expression Operators: https://docs.mongodb.com/manual/reference/operator/aggregation/#array-expression-operators\nimport { ComputeOptions, computeValue } from \"../../../core\";\nimport { assert, isArray } from \"../../../util\";\n/**\n * Applies a sub-expression to each element of an array and returns the array of resulting values in order.\n *\n * @param obj\n * @param expr\n * @returns {Array|*}\n */\nexport const $map = (obj, expr, options) => {\n  const input = computeValue(obj, expr.input, null, options);\n  assert(isArray(input), `$map 'input' expression must resolve to an array`);\n  const copts = ComputeOptions.init(options);\n  const k = expr.as || \"this\";\n  return input.map(o => {\n    return computeValue(obj, expr.in, null, copts.update(copts.root, {\n      variables: {\n        [k]: o\n      }\n    }));\n  });\n};","map":{"version":3,"names":["ComputeOptions","computeValue","assert","isArray","$map","obj","expr","options","input","copts","init","k","as","map","o","in","update","root","variables"],"sources":["/Users/abdelghanem/Desktop/tasker/node_modules/mingo/dist/esm/operators/expression/array/map.js"],"sourcesContent":["// Array Expression Operators: https://docs.mongodb.com/manual/reference/operator/aggregation/#array-expression-operators\nimport { ComputeOptions, computeValue } from \"../../../core\";\nimport { assert, isArray } from \"../../../util\";\n/**\n * Applies a sub-expression to each element of an array and returns the array of resulting values in order.\n *\n * @param obj\n * @param expr\n * @returns {Array|*}\n */\nexport const $map = (obj, expr, options) => {\n    const input = computeValue(obj, expr.input, null, options);\n    assert(isArray(input), `$map 'input' expression must resolve to an array`);\n    const copts = ComputeOptions.init(options);\n    const k = expr.as || \"this\";\n    return input.map((o) => {\n        return computeValue(obj, expr.in, null, copts.update(copts.root, {\n            variables: { [k]: o }\n        }));\n    });\n};\n"],"mappings":"AAAA;AACA,SAASA,cAAc,EAAEC,YAAY,QAAQ,eAAe;AAC5D,SAASC,MAAM,EAAEC,OAAO,QAAQ,eAAe;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,MAAMC,IAAI,GAAGA,CAACC,GAAG,EAAEC,IAAI,EAAEC,OAAO,KAAK;EACxC,MAAMC,KAAK,GAAGP,YAAY,CAACI,GAAG,EAAEC,IAAI,CAACE,KAAK,EAAE,IAAI,EAAED,OAAO,CAAC;EAC1DL,MAAM,CAACC,OAAO,CAACK,KAAK,CAAC,EAAE,kDAAkD,CAAC;EAC1E,MAAMC,KAAK,GAAGT,cAAc,CAACU,IAAI,CAACH,OAAO,CAAC;EAC1C,MAAMI,CAAC,GAAGL,IAAI,CAACM,EAAE,IAAI,MAAM;EAC3B,OAAOJ,KAAK,CAACK,GAAG,CAAEC,CAAC,IAAK;IACpB,OAAOb,YAAY,CAACI,GAAG,EAAEC,IAAI,CAACS,EAAE,EAAE,IAAI,EAAEN,KAAK,CAACO,MAAM,CAACP,KAAK,CAACQ,IAAI,EAAE;MAC7DC,SAAS,EAAE;QAAE,CAACP,CAAC,GAAGG;MAAE;IACxB,CAAC,CAAC,CAAC;EACP,CAAC,CAAC;AACN,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}