{"ast":null,"code":"import { Aggregator } from \"../../aggregator\";\nimport { ProcessingMode } from \"../../core\";\n/**\n * Processes multiple aggregation pipelines within a single stage on the same set of input documents.\n * Enables the creation of multi-faceted aggregations capable of characterizing data across multiple dimensions, or facets, in a single stage.\n */\nexport const $facet = (collection, expr, options) => {\n  return collection.transform(array => {\n    const o = {};\n    for (const [k, pipeline] of Object.entries(expr)) {\n      o[k] = new Aggregator(pipeline, Object.assign(Object.assign({}, options), {\n        processingMode: ProcessingMode.CLONE_INPUT\n      })).run(array);\n    }\n    return [o];\n  });\n};","map":{"version":3,"names":["Aggregator","ProcessingMode","$facet","collection","expr","options","transform","array","o","k","pipeline","Object","entries","assign","processingMode","CLONE_INPUT","run"],"sources":["/Users/abdelghanem/Desktop/tasker/node_modules/mingo/dist/esm/operators/pipeline/facet.js"],"sourcesContent":["import { Aggregator } from \"../../aggregator\";\nimport { ProcessingMode } from \"../../core\";\n/**\n * Processes multiple aggregation pipelines within a single stage on the same set of input documents.\n * Enables the creation of multi-faceted aggregations capable of characterizing data across multiple dimensions, or facets, in a single stage.\n */\nexport const $facet = (collection, expr, options) => {\n    return collection.transform(((array) => {\n        const o = {};\n        for (const [k, pipeline] of Object.entries(expr)) {\n            o[k] = new Aggregator(pipeline, Object.assign(Object.assign({}, options), { processingMode: ProcessingMode.CLONE_INPUT })).run(array);\n        }\n        return [o];\n    }));\n};\n"],"mappings":"AAAA,SAASA,UAAU,QAAQ,kBAAkB;AAC7C,SAASC,cAAc,QAAQ,YAAY;AAC3C;AACA;AACA;AACA;AACA,OAAO,MAAMC,MAAM,GAAGA,CAACC,UAAU,EAAEC,IAAI,EAAEC,OAAO,KAAK;EACjD,OAAOF,UAAU,CAACG,SAAS,CAAGC,KAAK,IAAK;IACpC,MAAMC,CAAC,GAAG,CAAC,CAAC;IACZ,KAAK,MAAM,CAACC,CAAC,EAAEC,QAAQ,CAAC,IAAIC,MAAM,CAACC,OAAO,CAACR,IAAI,CAAC,EAAE;MAC9CI,CAAC,CAACC,CAAC,CAAC,GAAG,IAAIT,UAAU,CAACU,QAAQ,EAAEC,MAAM,CAACE,MAAM,CAACF,MAAM,CAACE,MAAM,CAAC,CAAC,CAAC,EAAER,OAAO,CAAC,EAAE;QAAES,cAAc,EAAEb,cAAc,CAACc;MAAY,CAAC,CAAC,CAAC,CAACC,GAAG,CAACT,KAAK,CAAC;IACzI;IACA,OAAO,CAACC,CAAC,CAAC;EACd,CAAE,CAAC;AACP,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}