{"ast":null,"code":"import { computeValue } from \"../../core\";\nimport { assert, isObject } from \"../../util\";\n/**\n * Replaces a document with the specified embedded document or new one.\n * The replacement document can be any valid expression that resolves to a document.\n *\n * https://docs.mongodb.com/manual/reference/operator/aggregation/replaceRoot/\n *\n * @param  {Iterator} collection\n * @param  {Object} expr\n * @param  {Object} options\n * @return {*}\n */\nexport const $replaceRoot = (collection, expr, options) => {\n  return collection.map(obj => {\n    obj = computeValue(obj, expr.newRoot, null, options);\n    assert(isObject(obj), \"$replaceRoot expression must return an object\");\n    return obj;\n  });\n};","map":{"version":3,"names":["computeValue","assert","isObject","$replaceRoot","collection","expr","options","map","obj","newRoot"],"sources":["/Users/abdelghanem/Desktop/tasker/node_modules/mingo/dist/esm/operators/pipeline/replaceRoot.js"],"sourcesContent":["import { computeValue } from \"../../core\";\nimport { assert, isObject } from \"../../util\";\n/**\n * Replaces a document with the specified embedded document or new one.\n * The replacement document can be any valid expression that resolves to a document.\n *\n * https://docs.mongodb.com/manual/reference/operator/aggregation/replaceRoot/\n *\n * @param  {Iterator} collection\n * @param  {Object} expr\n * @param  {Object} options\n * @return {*}\n */\nexport const $replaceRoot = (collection, expr, options) => {\n    return collection.map(obj => {\n        obj = computeValue(obj, expr.newRoot, null, options);\n        assert(isObject(obj), \"$replaceRoot expression must return an object\");\n        return obj;\n    });\n};\n"],"mappings":"AAAA,SAASA,YAAY,QAAQ,YAAY;AACzC,SAASC,MAAM,EAAEC,QAAQ,QAAQ,YAAY;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,MAAMC,YAAY,GAAGA,CAACC,UAAU,EAAEC,IAAI,EAAEC,OAAO,KAAK;EACvD,OAAOF,UAAU,CAACG,GAAG,CAACC,GAAG,IAAI;IACzBA,GAAG,GAAGR,YAAY,CAACQ,GAAG,EAAEH,IAAI,CAACI,OAAO,EAAE,IAAI,EAAEH,OAAO,CAAC;IACpDL,MAAM,CAACC,QAAQ,CAACM,GAAG,CAAC,EAAE,+CAA+C,CAAC;IACtE,OAAOA,GAAG;EACd,CAAC,CAAC;AACN,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}