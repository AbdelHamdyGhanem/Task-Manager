{"ast":null,"code":"import { $group } from \"./group\";\nimport { $sort } from \"./sort\";\n/**\n * Groups incoming documents based on the value of a specified expression,\n * then computes the count of documents in each distinct group.\n *\n * https://docs.mongodb.com/manual/reference/operator/aggregation/sortByCount/\n *\n * @param  {Array} collection\n * @param  {Object} expr\n * @param  {Object} options\n * @return {*}\n */\nexport const $sortByCount = (collection, expr, options) => {\n  const newExpr = {\n    count: {\n      $sum: 1\n    }\n  };\n  newExpr[\"_id\"] = expr;\n  return $sort($group(collection, newExpr, options), {\n    count: -1\n  }, options);\n};","map":{"version":3,"names":["$group","$sort","$sortByCount","collection","expr","options","newExpr","count","$sum"],"sources":["/Users/abdelghanem/Desktop/tasker/node_modules/mingo/dist/esm/operators/pipeline/sortByCount.js"],"sourcesContent":["import { $group } from \"./group\";\nimport { $sort } from \"./sort\";\n/**\n * Groups incoming documents based on the value of a specified expression,\n * then computes the count of documents in each distinct group.\n *\n * https://docs.mongodb.com/manual/reference/operator/aggregation/sortByCount/\n *\n * @param  {Array} collection\n * @param  {Object} expr\n * @param  {Object} options\n * @return {*}\n */\nexport const $sortByCount = (collection, expr, options) => {\n    const newExpr = { count: { $sum: 1 } };\n    newExpr[\"_id\"] = expr;\n    return $sort($group(collection, newExpr, options), { count: -1 }, options);\n};\n"],"mappings":"AAAA,SAASA,MAAM,QAAQ,SAAS;AAChC,SAASC,KAAK,QAAQ,QAAQ;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,MAAMC,YAAY,GAAGA,CAACC,UAAU,EAAEC,IAAI,EAAEC,OAAO,KAAK;EACvD,MAAMC,OAAO,GAAG;IAAEC,KAAK,EAAE;MAAEC,IAAI,EAAE;IAAE;EAAE,CAAC;EACtCF,OAAO,CAAC,KAAK,CAAC,GAAGF,IAAI;EACrB,OAAOH,KAAK,CAACD,MAAM,CAACG,UAAU,EAAEG,OAAO,EAAED,OAAO,CAAC,EAAE;IAAEE,KAAK,EAAE,CAAC;EAAE,CAAC,EAAEF,OAAO,CAAC;AAC9E,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}