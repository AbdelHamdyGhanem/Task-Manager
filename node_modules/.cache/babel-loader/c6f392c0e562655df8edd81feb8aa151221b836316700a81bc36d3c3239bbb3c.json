{"ast":null,"code":"// $sample operator -  https://docs.mongodb.com/manual/reference/operator/aggregation/sample/\n/**\n * Randomly selects the specified number of documents from its input. The given iterator must have finite values\n *\n * @param  {Iterator} collection\n * @param  {Object} expr\n * @param  {Options} _options\n * @return {*}\n */\nexport const $sample = (collection, expr, _options) => {\n  return collection.transform(xs => {\n    const len = xs.length;\n    let i = -1;\n    return () => {\n      if (++i === expr.size) return {\n        done: true\n      };\n      const n = Math.floor(Math.random() * len);\n      return {\n        value: xs[n],\n        done: false\n      };\n    };\n  });\n};","map":{"version":3,"names":["$sample","collection","expr","_options","transform","xs","len","length","i","size","done","n","Math","floor","random","value"],"sources":["/Users/abdelghanem/Desktop/tasker/node_modules/mingo/dist/esm/operators/pipeline/sample.js"],"sourcesContent":["// $sample operator -  https://docs.mongodb.com/manual/reference/operator/aggregation/sample/\n/**\n * Randomly selects the specified number of documents from its input. The given iterator must have finite values\n *\n * @param  {Iterator} collection\n * @param  {Object} expr\n * @param  {Options} _options\n * @return {*}\n */\nexport const $sample = (collection, expr, _options) => {\n    return collection.transform(((xs) => {\n        const len = xs.length;\n        let i = -1;\n        return () => {\n            if (++i === expr.size)\n                return { done: true };\n            const n = Math.floor(Math.random() * len);\n            return { value: xs[n], done: false };\n        };\n    }));\n};\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,MAAMA,OAAO,GAAGA,CAACC,UAAU,EAAEC,IAAI,EAAEC,QAAQ,KAAK;EACnD,OAAOF,UAAU,CAACG,SAAS,CAAGC,EAAE,IAAK;IACjC,MAAMC,GAAG,GAAGD,EAAE,CAACE,MAAM;IACrB,IAAIC,CAAC,GAAG,CAAC,CAAC;IACV,OAAO,MAAM;MACT,IAAI,EAAEA,CAAC,KAAKN,IAAI,CAACO,IAAI,EACjB,OAAO;QAAEC,IAAI,EAAE;MAAK,CAAC;MACzB,MAAMC,CAAC,GAAGC,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,MAAM,CAAC,CAAC,GAAGR,GAAG,CAAC;MACzC,OAAO;QAAES,KAAK,EAAEV,EAAE,CAACM,CAAC,CAAC;QAAED,IAAI,EAAE;MAAM,CAAC;IACxC,CAAC;EACL,CAAE,CAAC;AACP,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}