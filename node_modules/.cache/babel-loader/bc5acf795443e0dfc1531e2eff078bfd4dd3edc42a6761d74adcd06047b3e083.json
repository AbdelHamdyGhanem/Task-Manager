{"ast":null,"code":"// https://www.mongodb.com/docs/manual/reference/operator/aggregation/lastN-array-element/#mongodb-expression-exp.-lastN\nimport { computeValue } from \"../../../core\";\nimport { assert, isArray, isNil } from \"../../../util\";\nimport { $lastN as __lastN } from \"../../accumulator/lastN\";\n/**\n * Returns a specified number of elements from the end of an array.\n *\n * @param  {Object} obj\n * @param  {*} expr\n * @return {*}\n */\nexport const $lastN = (obj, expr, options) => {\n  // first try the accumulator if input is an array.\n  if (obj instanceof Array) return __lastN(obj, expr, options);\n  const {\n    input,\n    n\n  } = computeValue(obj, expr, null, options);\n  if (isNil(input)) return null;\n  assert(isArray(input), \"Must resolve to an array/null or missing\");\n  return __lastN(input, {\n    n,\n    input: \"$$this\"\n  }, options);\n};","map":{"version":3,"names":["computeValue","assert","isArray","isNil","$lastN","__lastN","obj","expr","options","Array","input","n"],"sources":["/Users/abdelghanem/Desktop/tasker/node_modules/mingo/dist/esm/operators/expression/array/lastN.js"],"sourcesContent":["// https://www.mongodb.com/docs/manual/reference/operator/aggregation/lastN-array-element/#mongodb-expression-exp.-lastN\nimport { computeValue } from \"../../../core\";\nimport { assert, isArray, isNil } from \"../../../util\";\nimport { $lastN as __lastN } from \"../../accumulator/lastN\";\n/**\n * Returns a specified number of elements from the end of an array.\n *\n * @param  {Object} obj\n * @param  {*} expr\n * @return {*}\n */\nexport const $lastN = (obj, expr, options) => {\n    // first try the accumulator if input is an array.\n    if (obj instanceof Array)\n        return __lastN(obj, expr, options);\n    const { input, n } = computeValue(obj, expr, null, options);\n    if (isNil(input))\n        return null;\n    assert(isArray(input), \"Must resolve to an array/null or missing\");\n    return __lastN(input, { n, input: \"$$this\" }, options);\n};\n"],"mappings":"AAAA;AACA,SAASA,YAAY,QAAQ,eAAe;AAC5C,SAASC,MAAM,EAAEC,OAAO,EAAEC,KAAK,QAAQ,eAAe;AACtD,SAASC,MAAM,IAAIC,OAAO,QAAQ,yBAAyB;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,MAAMD,MAAM,GAAGA,CAACE,GAAG,EAAEC,IAAI,EAAEC,OAAO,KAAK;EAC1C;EACA,IAAIF,GAAG,YAAYG,KAAK,EACpB,OAAOJ,OAAO,CAACC,GAAG,EAAEC,IAAI,EAAEC,OAAO,CAAC;EACtC,MAAM;IAAEE,KAAK;IAAEC;EAAE,CAAC,GAAGX,YAAY,CAACM,GAAG,EAAEC,IAAI,EAAE,IAAI,EAAEC,OAAO,CAAC;EAC3D,IAAIL,KAAK,CAACO,KAAK,CAAC,EACZ,OAAO,IAAI;EACfT,MAAM,CAACC,OAAO,CAACQ,KAAK,CAAC,EAAE,0CAA0C,CAAC;EAClE,OAAOL,OAAO,CAACK,KAAK,EAAE;IAAEC,CAAC;IAAED,KAAK,EAAE;EAAS,CAAC,EAAEF,OAAO,CAAC;AAC1D,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}